
<html>
  <head>
	   <meta charset="utf-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1">

	     <link href="style.css" rel="stylesheet">
  </head>

     <body class="map-body">

	      <div id="map"></div>

        <script>

          var map;
          function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
              center: {
                <% @properties.each do |property| %>
                var lat = <%= property.lat.to_json %>;
                var long = <%= property.long.to_json %>;
                lat: lat,
                lng:  long

                var myLatLng = {lat, lng};

                var marker = new google.maps.Marker({
                  map: map,
                  position: myLatLng,
                  title: 'Hello World!'
                });
              }

                <% end %>
              },
          zoom: 8
          });
        }
        </script>

	      <script async defer
        src="<%="https://www.google.com/maps/embed/v1/place?key=#{ENV['GOOGLE_MAP_KEY']}&q=#{property_attributes(@properties)}"%>" allowfullscreen>
        </script>
    </body>
</html>
